<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Senarai Ka - File A</title>

<style>
* { box-sizing: border-box; }
body { margin: 0; background: #000; color: #fff; font-family: system-ui, -apple-system, sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 20px; }

/* Header Style */
.header { width: 100%; max-width: 450px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
.btn-top { background: #1c1c1e; color: #eee; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: bold; }

.container { width: 100%; max-width: 450px; }

/* Kotak Nipis Style */
.kotak { 
    background: #1c1c1e; border-radius: 12px; padding: 10px 16px; margin-bottom: 10px; 
    display: flex; justify-content: space-between; align-items: center; border: 1px solid #2c2c2e; position: relative;
}

/* Warna Biru bila dah klik */
.kotak.dah-buka { background: #001a33; border-color: #007aff; }

.teks-utama { font-size: 14px; font-weight: 500; color: #fff; margin-bottom: 4px; }

/* Button Info Gaya Link */
.btn-info-link { background: none; border: none; color: #555; font-size: 11px; cursor: pointer; padding: 0; text-decoration: underline; }

.action-area { display: flex; align-items: center; gap: 12px; }

.btn-buka { 
    background: #ff3b30; color: #fff; border: none; padding: 6px 14px; 
    border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 12px; text-decoration: none;
}

/* Butang Delete (X) */
.btn-delete { background: none; border: none; color: #444; font-size: 18px; cursor: pointer; padding: 5px; line-height: 1; }
.btn-delete:hover { color: #ff3b30; }

/* Popup (Modal) Style */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); align-items: center; justify-content: center; }
.modal-content { background: #1c1c1e; padding: 20px; border-radius: 15px; width: 85%; max-width: 320px; text-align: center; border: 1px solid #333; }
.modal-content h3 { margin: 0 0 10px 0; font-size: 16px; color: #007aff; }
.modal-content p { font-size: 13px; color: #bbb; line-height: 1.5; margin-bottom: 20px; }
.btn-close { background: #444; color: #fff; border: none; padding: 8px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
</style>
</head>

<body>

<div class="header">
    <button class="btn-top" onclick="window.location.href='file.html'">BACK</button>
    <h4 style="margin: 0; letter-spacing: 2px; font-size: 14px;">SENARAI KA</h4>
    <button class="btn-top" onclick="resetSemua()">RESET</button>
</div>

<div class="container" id="listArea">
    </div>

<div id="myModal" class="modal">
    <div class="modal-content">
        <h3 id="popTitle">INFO</h3>
        <p id="popText">Teks maklumat akan muncul di sini.</p>
        <button class="btn-close" onclick="closePopup()">TUTUP</button>
    </div>
</div>

<script>
// Data List (Ka boleh tambah/tukar secara manual kat sini)
let dataKa = JSON.parse(localStorage.getItem('list_data_ka')) || [
    { id: "L1", tajuk: "Koleksi Video 01", url: "https://google.com", detail: "Video ini memerlukan aplikasi MEGA untuk dimainkan dengan lancar." },
    { id: "L2", tajuk: "Koleksi Video 02", url: "https://youtube.com", detail: "Pastikan sambungan internet stabil. Resolusi 1080p tersedia." },
    { id: "L3", tajuk: "Koleksi Gambar 03", url: "https://facebook.com", detail: "Gambar arkib sulit tahun 2024. Sila simpan untuk rujukan." },
    { id: "L4", tajuk: "Secret Link 04",    url: "https://tiktok.com",   detail: "Pautan ini akan tamat tempoh dalam masa 24 jam." }
];

const listArea = document.getElementById("listArea");

function render() {
    listArea.innerHTML = "";
    const clickedStatus = JSON.parse(localStorage.getItem('sudah_klik')) || {};

    dataKa.forEach((item, index) => {
        const isBlue = clickedStatus[item.id];
        const div = document.createElement("div");
        div.className = `kotak ${isBlue ? 'dah-buka' : ''}`;
        
        div.innerHTML = `
            <div>
                <div class="teks-utama">${item.tajuk}</div>
                <button class="btn-info-link" onclick="openPopup('${item.tajuk}', '${item.detail}')">INFO | DETAIL | LINK</button>
            </div>
            <div class="action-area">
                <a href="${item.url}" target="_blank" class="btn-buka" onclick="markClick('${item.id}')">BUKA</a>
                <button class="btn-delete" onclick="deleteItem(${index})">Ã—</button>
            </div>
        `;
        listArea.appendChild(div);
    });
}

function markClick(id) {
    let clickedStatus = JSON.parse(localStorage.getItem('sudah_klik')) || {};
    clickedStatus[id] = true;
    localStorage.setItem('sudah_klik', JSON.stringify(clickedStatus));
    setTimeout(render, 500);
}

function deleteItem(index) {
    if(confirm("Hapus list ni, Ka?")) {
        dataKa.splice(index, 1);
        localStorage.setItem('list_data_ka', JSON.stringify(dataKa));
        render();
    }
}

function openPopup(title, text) {
    document.getElementById("popTitle").innerText = title;
    document.getElementById("popText").innerText = text;
    document.getElementById("myModal").style.display = "flex";
}

function closePopup() {
    document.getElementById("myModal").style.display = "none";
}

function resetSemua() {
    if(confirm("Reset semua jadi asal balik?")) {
        localStorage.removeItem('sudah_klik');
        localStorage.removeItem('list_data_ka');
        location.reload();
    }
}

// Start!
window.onload = render;
</script>

</body>
</html>
